<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>馬肉 部位図（反応版）</title>
<style>
:root {
  --bg:#fff6f8; --accent:#d96c8b;
  --hover:rgba(217,108,139,.22);
  --active:rgba(217,108,139,.35);
  --line:#f3c4cf; --ink:#222;
}
body {
  margin:0; padding:24px;
  font-family: "Noto Sans JP", sans-serif;
  background:var(--bg); color:var(--ink);
  display:flex; gap:30px;
}
.stage-wrap { position:relative; flex:1 1 auto; display:flex; justify-content:center; }
.overlay {
  position:absolute; inset:0;
  width:100%; height:100%;
  pointer-events:none;
}
.hit {
  fill:transparent; stroke:transparent; pointer-events:all;
  cursor:pointer; rx:8; ry:8;
  transition:fill .15s ease;
}
.hit:hover { fill:var(--hover); }
.hit[aria-selected="true"] { fill:var(--active); stroke:#d96c8b66; }

aside {
  width:340px; background:#fff;
  border-left:3px solid var(--line);
  border-radius:10px; padding:18px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
}
h1 { font-size:18px; color:var(--accent); margin-top:0; }
.sec h3 { margin:.3em 0; font-size:13px; color:#666; }
p { margin:.2em 0 1em; line-height:1.8; }
.toast {
  position:fixed; left:50%; bottom:22px;
  transform:translateX(-50%);
  background:#111; color:#fff; padding:10px 16px;
  border-radius:8px; font-size:14px;
}
</style>
</head>
<body>

<div class="stage-wrap">
  <!-- SVG直接埋め込み -->
  <svg id="horseSVG" viewBox="0 0 612 454" width="100%" style="max-width:1080px; height:auto; border:1px solid var(--line); border-radius:10px; background:#fff;">
    <!-- ↓↓↓ あなたのSVG内容をまるごとここに貼り付けてください ↓↓↓ -->
    <!-- ⚠️ <?xml version〜> や <svg>タグは不要。中の <path> などだけコピペ。 -->
  </svg>

  <!-- 透明クリックレイヤー -->
  <svg class="overlay" viewBox="0 0 612 454" preserveAspectRatio="none">
    <g id="hits"></g>
  </svg>
</div>

<aside>
  <h1>馬肉 部位図</h1>
  <h2 id="title">部位を選択してください</h2>
  <div class="sec"><h3>説明</h3><p id="desc">部位名の上でクリックすると説明が表示されます。</p></div>
  <div class="sec"><h3>おすすめの食べ方</h3><p id="eat">EC向け案内を自動表示。</p></div>
</aside>

<script>
const VB = { w:612, h:454 };
const PARTS = [
  "たてがみ","ネック","肩ロース","ロース","ヒレ","前バラ","後バラ","フタエゴ",
  "内モモ","外モモ","シンタマ","イチボ","スネ(左)","スネ(右)","ラム"
];
const DATA = {
  "たてがみ": {desc:"ぷるぷる脂の甘み。赤身と合わせて“紅白刺し”。", eat:"薄切り＋塩ごま油。"},
  "ネック": {desc:"首まわりの赤身。噛むほど旨み。", eat:"ユッケ風・軽炙り。"},
  "肩ロース": {desc:"サシと赤身のバランス抜群。", eat:"生姜醤油・炙り。"},
  "ロース": {desc:"上品なサシの王道部位。", eat:"生姜醤油＋薬味。"},
  "ヒレ": {desc:"最も柔らかい赤身。", eat:"わさび醤油。"},
  "前バラ": {desc:"脂のコクが濃い。", eat:"馬丼・味噌焼き。"},
  "後バラ": {desc:"腰寄り。濃厚な旨み。", eat:"煮込み・甘辛ダレ。"},
  "フタエゴ": {desc:"脂と赤身の層のコリコリ食感。", eat:"酢味噌・ポン酢。"},
  "内モモ": {desc:"しっとり上品な赤身。", eat:"薄切り刺し・わさび。"},
  "外モモ": {desc:"引き締まった赤身。", eat:"炙りポン酢。"},
  "シンタマ": {desc:"柔らか赤身。", eat:"赤身刺し。"},
  "イチボ": {desc:"お尻の柔脂部。", eat:"塩ごま油。"},
  "スネ(左)": {desc:"コラーゲン豊富。", eat:"煮込み。"},
  "スネ(右)": {desc:"コラーゲン豊富。", eat:"煮込み。"},
  "ラム": {desc:"腰上の上品な赤身。", eat:"刺し・タタキ。"}
};

const hitsG = document.getElementById('hits');
const titleEl=document.getElementById('title');
const descEl=document.getElementById('desc');
const eatEl=document.getElementById('eat');

function createToast(txt){
  const t=document.createElement('div');
  t.className="toast";t.textContent=txt;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),2000);
}

// 初回登録 or 保存済み座標
let spots=JSON.parse(localStorage.getItem('umaPartsSpots')||'{"list":[]}');

function save(){localStorage.setItem('umaPartsSpots',JSON.stringify(spots));}
function render(){
  hitsG.innerHTML="";
  spots.list.forEach(s=>{
    const r=document.createElementNS('http://www.w3.org/2000/svg','rect');
    r.setAttribute('class','hit');
    r.setAttribute('x',s.x-s.w/2);
    r.setAttribute('y',s.y-s.h/2);
    r.setAttribute('width',s.w);
    r.setAttribute('height',s.h);
    r.dataset.name=s.name;
    hitsG.appendChild(r);
    r.addEventListener('click',()=>{
      document.querySelectorAll('.hit').forEach(e=>e.removeAttribute('aria-selected'));
      r.setAttribute('aria-selected','true');
      const d=DATA[s.name]||{desc:"—",eat:"—"};
      titleEl.textContent=s.name;
      descEl.textContent=d.desc; eatEl.textContent=d.eat;
    });
  });
}

if(spots.list.length===0){
  const overlay=document.querySelector('.overlay');
  const rect=overlay.getBoundingClientRect();
  let i=0;
  createToast(`① ${PARTS[i]} の位置をクリック`);
  overlay.addEventListener('click',function reg(ev){
    const px=ev.offsetX, py=ev.offsetY;
    const sx=px/rect.width*VB.w, sy=py/rect.height*VB.h;
    spots.list.push({name:PARTS[i],x:sx,y:sy,w:64,h:30});
    i++;
    if(i<PARTS.length){
      createToast(`${i+1} / ${PARTS.length}：${PARTS[i]} の位置`);
    }else{
      overlay.removeEventListener('click',reg);
      save(); createToast("登録完了！");
      render();
    }
  });
}else render();
</script>
</body>
</html>
