<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ´ é¦¬è‚‰ éƒ¨ä½å›³ã‚¬ã‚¤ãƒ‰ï¼ˆå®Œæˆç‰ˆï¼‰</title>
<style>
  :root {
    --bg: #fdeef0;
    --card: #fff;
    --accent: #f7b1b8;
    --text: #222;
    --ink: #d6336c;
  }

  body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: "Yu Gothic", "Hiragino Sans", sans-serif;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 2rem;
    padding: 2rem;
    box-sizing: border-box;
  }

  .svgbox {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    max-width: 900px;
    background: #fff6;
    border-radius: 12px;
    position: relative;
  }

  .svgbox svg {
    width: 100%;
    height: auto;
    max-width: 900px;
    transition: all 0.2s ease;
  }

  /* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã®ä¸¸ */
  .edit-dot {
    fill: white;
    stroke: #f06;
    stroke-width: 1.5;
    cursor: pointer;
  }

  .info-box {
    width: 340px;
    background: var(--card);
    padding: 1.6rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px #0001;
  }

  .info-box h2 {
    color: var(--ink);
    margin-bottom: 0.6rem;
    border-bottom: 2px solid var(--accent);
    display: inline-block;
  }

  @media (max-width: 900px) {
    body {
      flex-direction: column;
      align-items: center;
    }
    .info-box {
      width: 90%;
    }
  }
</style>
</head>
<body>

<div class="svgbox" id="svgContainer">
  <img src="screenshot-2025-10-20-203144.svg" id="horseMap" alt="é¦¬è‚‰éƒ¨ä½å›³">
</div>

<div class="info-box">
  <h2>é¦¬è‚‰ éƒ¨ä½å›³</h2>
  <p id="guide">éƒ¨ä½ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
  <div id="desc"></div>
</div>

<script>
// ============================
// è¨­å®šã‚¨ãƒªã‚¢ï¼ˆèª¬æ˜æ–‡ï¼‰
// ============================
const partsInfo = {
  "ãŸã¦ãŒã¿": "ã·ã‚‹ã·ã‚‹ã¨ã—ãŸé£Ÿæ„Ÿã§ã‚³ãƒ©ãƒ¼ã‚²ãƒ³ãŒè±Šå¯Œã€‚èµ¤èº«ã¨ä¸€ç·’ã«é£Ÿã¹ã‚‹ã¨æœ€é«˜ã®ãƒãƒ©ãƒ³ã‚¹ã€‚",
  "ãƒãƒƒã‚¯": "æ˜”ãªãŒã‚‰ã®èµ¤èº«ã€‚å™›ã‚€ã»ã©æ—¨ã¿ã€‚ãƒ¦ãƒƒã‚±ãƒ»ã‚¿ã‚¿ã‚­ãªã©ã«æœ€é©ã€‚",
  "ãƒ­ãƒ¼ã‚¹": "èµ¤èº«ã¨è„‚ã®ãƒãƒ©ãƒ³ã‚¹ãŒã‚ˆãã€åˆºèº«ã‚„ç„¼ãã«ã‚‚æœ€é©ã€‚",
  "ãƒ’ãƒ¬": "æœ€ã‚‚æŸ”ã‚‰ã‹ã„å¸Œå°‘éƒ¨ä½ã€‚ä¸Šå“ã§ç”˜ã¿ã®ã‚ã‚‹å‘³ã€‚",
  "ãƒãƒ©": "æ—¨ã¿ãŒå¼·ãç…®è¾¼ã¿æ–™ç†å‘ãã€‚äººæ°—éƒ¨ä½ã€‚",
  "ãƒ©ãƒ ": "å¾Œã‚è…°éƒ¨ã®èµ¤èº«ã€‚ç¨‹ã‚ˆã„æ­¯ã”ãŸãˆã¨æ¿ƒåšãªæ—¨å‘³ã€‚"
};

// ============================
// ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š
// ============================
const urlParams = new URLSearchParams(window.location.search);
const editMode = urlParams.get("edit") === "1";

// ============================
// SVGç”»åƒã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¯ãƒªãƒƒã‚¯ç¯„å›²è¨­å®š
// ============================
const container = document.getElementById("svgContainer");
const img = document.getElementById("horseMap");
const descBox = document.getElementById("desc");
const guideText = document.getElementById("guide");

img.onload = () => {
  const svgRect = container.getBoundingClientRect();

  // éƒ¨ä½ã‚¯ãƒªãƒƒã‚¯ç¯„å›²ï¼ˆåº§æ¨™ï¼‰
  const areas = {
    "ãŸã¦ãŒã¿": {x:180, y:100, w:180, h:60},
    "ãƒãƒƒã‚¯": {x:240, y:170, w:220, h:80},
    "ãƒ­ãƒ¼ã‚¹": {x:420, y:180, w:180, h:70},
    "ãƒ’ãƒ¬": {x:440, y:250, w:140, h:60},
    "ãƒãƒ©": {x:370, y:300, w:160, h:80},
    "ãƒ©ãƒ ": {x:620, y:200, w:130, h:90}
  };

  const svgNS = "http://www.w3.org/2000/svg";
  const overlay = document.createElementNS(svgNS, "svg");
  overlay.setAttribute("width", "100%");
  overlay.setAttribute("height", "100%");
  overlay.style.position = "absolute";
  overlay.style.top = 0;
  overlay.style.left = 0;
  container.appendChild(overlay);

  for (const [name, pos] of Object.entries(areas)) {
    const rect = document.createElementNS(svgNS, "rect");
    rect.setAttribute("x", pos.x);
    rect.setAttribute("y", pos.y);
    rect.setAttribute("width", pos.w);
    rect.setAttribute("height", pos.h);
    rect.setAttribute("fill", "rgba(255,0,100,0.15)");
    rect.style.cursor = "pointer";
    rect.style.transition = "0.2s";
    rect.setAttribute("data-name", name);

    // hoveræ™‚ã®åå¿œ
    rect.addEventListener("mouseenter", ()=>{
      rect.setAttribute("fill", "rgba(255,0,100,0.35)");
    });
    rect.addEventListener("mouseleave", ()=>{
      rect.setAttribute("fill", "rgba(255,0,100,0.15)");
    });

    // click or touchstartã§èª¬æ˜è¡¨ç¤º
    const activate = ()=>{
      guideText.innerHTML = `<b>${name}</b>`;
      descBox.textContent = partsInfo[name] || "èª¬æ˜ãŒæœªç™»éŒ²ã§ã™ã€‚";
    };
    rect.addEventListener("click", activate);
    rect.addEventListener("touchstart", e=>{
      e.preventDefault();
      activate();
    });

    // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ãªã‚‰ä¸¸å‡ºã™
    if (editMode) {
      const dot = document.createElementNS(svgNS, "circle");
      dot.classList.add("edit-dot");
      dot.setAttribute("cx", pos.x + pos.w/2);
      dot.setAttribute("cy", pos.y + pos.h/2);
      dot.setAttribute("r", 6);
      overlay.appendChild(dot);
    }

    overlay.appendChild(rect);
  }
};
</script>

</body>
</html>
