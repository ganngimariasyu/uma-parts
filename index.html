<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>🐴 馬肉 部位ガイド（完全版）</title>
<style>
  :root {
    --bg: #fdeef0;
    --card: #fff;
    --accent: #f7b1b8;
    --text: #222;
    --ink: #d6336c;
  }

  body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: "Yu Gothic", "Hiragino Sans", sans-serif;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 2rem;
    padding: 2rem;
    box-sizing: border-box;
  }

  .svgbox {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    max-width: 900px;
    background: #fff6;
    border-radius: 12px;
    position: relative;
  }

  .svgbox svg {
    width: 100%;
    height: auto;
    max-width: 900px;
    transition: all 0.2s ease;
  }

  .edit-dot {
    fill: white;
    stroke: #f06;
    stroke-width: 1.5;
    cursor: pointer;
  }

  .info-box {
    width: 340px;
    background: var(--card);
    padding: 1.6rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px #0001;
  }

  .info-box h2 {
    color: var(--ink);
    margin-bottom: 0.6rem;
    border-bottom: 2px solid var(--accent);
    display: inline-block;
  }

  @media (max-width: 900px) {
    body {
      flex-direction: column;
      align-items: center;
    }
    .info-box {
      width: 90%;
    }
  }
</style>
</head>
<body>

<div class="svgbox" id="svgContainer">
  <img src="screenshot-2025-10-20-203144.svg" id="horseMap" alt="馬肉部位図" />
</div>

<div class="info-box">
  <h2>馬肉 部位図</h2>
  <p id="guide">部位を選択してください</p>
  <div id="desc"></div>
</div>

<script>
// ============================
// 部位説明まとめ
// ============================
const partsInfo = {
  "たてがみ": "ぷるぷるとした食感でコラーゲンが豊富。赤身と一緒に食べると最高のバランス。",
  "ネック": "昔ながらの赤身。噛むほどに旨みが溢れる。ユッケや煮込みにも。",
  "肩ロース": "ほどよいサシが入った柔らかい部位。刺身・すき焼きに最適。",
  "ロース": "脂と赤身のバランスが絶妙。馬刺し定番部位。",
  "ヒレ": "最も柔らかい希少部位。上品な味わいで人気。",
  "バラ": "旨みの強い部位で煮込み料理にもぴったり。",
  "前バラ": "コクのある脂身が特徴。焼きにも向く。",
  "後バラ": "赤身と脂が重なり合う味わい深い部位。",
  "内モモ": "しっとりとした赤身。低脂肪でヘルシー。",
  "外モモ": "やや歯ごたえあり。噛むほどに旨みを感じる。",
  "イチボ": "希少部位で赤身と脂のバランス◎。焼きにもおすすめ。",
  "ランプ": "腰から尻にかけての赤身。濃厚な旨み。",
  "ラム": "腰部の柔らかな赤身。刺身・焼きどちらもOK。",
  "ブリスケ": "肩下の筋肉質な部位。煮込み料理でとろける旨さ。",
  "肩バラ": "脂のコクが強く、煮込みや焼肉に最適。",
  "フロント": "前脚の付け根。旨味が濃厚でスジ煮込みに。",
  "スネ": "筋が多く長時間煮込むととろける食感。馬すじ煮込みの定番。"
};

// ============================
// 編集モード判定
// ============================
const urlParams = new URLSearchParams(window.location.search);
const editMode = urlParams.get("edit") === "1";

// ============================
// 座標設定（SVG基準で微調整済）
// ============================
const areas = {
  "たてがみ": {x:180, y:80, w:140, h:60},
  "ネック": {x:220, y:140, w:200, h:90},
  "肩ロース": {x:330, y:130, w:140, h:70},
  "ロース": {x:460, y:150, w:160, h:70},
  "ヒレ": {x:470, y:230, w:130, h:50},
  "バラ": {x:380, y:280, w:140, h:70},
  "前バラ": {x:360, y:260, w:120, h:60},
  "後バラ": {x:500, y:260, w:140, h:60},
  "内モモ": {x:620, y:240, w:90, h:80},
  "外モモ": {x:640, y:180, w:90, h:70},
  "イチボ": {x:630, y:150, w:80, h:50},
  "ランプ": {x:580, y:220, w:90, h:70},
  "ラム": {x:600, y:120, w:100, h:60},
  "ブリスケ": {x:270, y:230, w:90, h:80},
  "肩バラ": {x:320, y:200, w:110, h:80},
  "フロント": {x:280, y:320, w:70, h:100},
  "スネ": {x:290, y:380, w:60, h:120}
};

// ============================
// 描画
// ============================
const container = document.getElementById("svgContainer");
const img = document.getElementById("horseMap");
const descBox = document.getElementById("desc");
const guideText = document.getElementById("guide");

img.onload = () => {
  const svgNS = "http://www.w3.org/2000/svg";
  const overlay = document.createElementNS(svgNS, "svg");
  overlay.setAttribute("width", "100%");
  overlay.setAttribute("height", "100%");
  overlay.style.position = "absolute";
  overlay.style.top = 0;
  overlay.style.left = 0;
  container.appendChild(overlay);

  for (const [name, pos] of Object.entries(areas)) {
    const rect = document.createElementNS(svgNS, "rect");
    rect.setAttribute("x", pos.x);
    rect.setAttribute("y", pos.y);
    rect.setAttribute("width", pos.w);
    rect.setAttribute("height", pos.h);
    rect.setAttribute("fill", "rgba(255,0,100,0.15)");
    rect.style.cursor = "pointer";
    rect.style.transition = "0.2s";
    rect.setAttribute("data-name", name);

    // hover強調
    rect.addEventListener("mouseenter", () => rect.setAttribute("fill", "rgba(255,0,100,0.35)"));
    rect.addEventListener("mouseleave", () => rect.setAttribute("fill", "rgba(255,0,100,0.15)"));

    // クリックまたはタップ
    const activate = () => {
      guideText.innerHTML = `<b>${name}</b>`;
      descBox.textContent = partsInfo[name] || "説明が未登録です。";
    };
    rect.addEventListener("click", activate);
    rect.addEventListener("touchstart", (e) => {
      e.preventDefault();
      activate();
    });

    // 編集モード時の白丸
    if (editMode) {
      const dot = document.createElementNS(svgNS, "circle");
      dot.classList.add("edit-dot");
      dot.setAttribute("cx", pos.x + pos.w / 2);
      dot.setAttribute("cy", pos.y + pos.h / 2);
      dot.setAttribute("r", 6);
      overlay.appendChild(dot);
    }

    overlay.appendChild(rect);
  }
};
</script>

</body>
</html>
